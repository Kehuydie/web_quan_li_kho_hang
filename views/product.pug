doctype html
html
  head
    title #{title}
    link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css")
  script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js")
    link(rel="stylesheet", href="/css/product.css")
  body
    button.btn.btn-primary.position-fixed.top-0.start-0.m-3.z-3(type="button", data-bs-toggle="offcanvas", data-bs-target="#sidebarMenu")
        i.bi.bi-list.me-1
        | >
    .offcanvas.offcanvas-start(id="sidebarMenu", tabindex="-1")
        .offcanvas-header
            h5.offcanvas-title Menu
            button.btn-close(type="button", data-bs-dismiss="offcanvas")
        .offcanvas-body
            ul.nav.flex-column.nav-pills
                li.nav-item
                    a.nav-link(href="/product") Sản phẩm
                li.nav-item
                    a.nav-link(href="/supplier") Nhà cung cấp
                li.nav-item
                    a.nav-link(href="/import") Phiếu nhập
                li.nav-item
                    a.nav-link(href="/import/create") Tạo phiếu nhập
                li.nav-item
                    a.nav-link(href="/export") Phiếu xuất
                li.nav-item
                    a.nav-link(href="/export/create") Tạo phiếu xuất
    h1.text-center Danh sách sản phẩm

    table.table.table-striped.table-bordered.table-hover
        thead.table-success
            tr
                th check
                th ID
                th Tên sản phẩm
                th Mô tả
                th ID Danh mục
                th Đơn vị
                th Giá nhập
                th Giá bán
                th Tồn kho
                th Tồn tối thiểu
                th Ngày tạo
                th Trạng thái
        tbody
            each product in getproduct
                tr
                    td 
                        input(type="checkbox",value=`${product.product_id}`,name="proid[]",class="itemcheckbox",data-name=product.product_name,data-des=product.description,data-catid=product.category_id,data-unit=product.unit,data-importprice=product.import_price,data-sellprice=product.sell_price,data-status=product.status)
                    td= product.product_id
                    td= product.product_name
                    td= product.description
                    td= product.category_id
                    td= product.unit
                    td= product.import_price
                    td= product.sell_price
                    td= product.stock_quantity
                    td= product.min_stock
                    td= product.created_date || 'Chưa có'
                    td 
                        if product.status === 'active'
                            span.badge.bg-success Active
                        else if product.status === 'inactive'
                            span.badge.bg-secondary Inactive
                        else
                            span.badge.bg-warning Chưa rõ


button.btn.btn-success(data-bs-toggle="modal", data-bs-target="#addProductModal") Thêm sản phẩm
button.btn.btn-danger(data-bs-toggle="modal", data-bs-target="#deleteProductModal") Xóa sản phẩm đã chọn
button#editButton.btn.btn-warning(type="button") Chỉnh sửa sản phẩm

div.modal.fade(id="addProductModal", tabindex="-1") 
  div.modal-dialog
    div.modal-content
      div.modal-header
        h5.modal-title Thêm sản phẩm mới
        button.btn-close(type="button", data-bs-dismiss="modal", aria-label="Close")
      div.modal-body
        form(action="/product/add", method="POST")
            .mb-3
                label.form-label(for="productName") Tên sản phẩm
                input.form-control(type="text", name="productName", required)
            .mb-3
                label.form-label(for="sell_prize") giá bán
                input.form-control(type="number", name="sell_price",step="0.01", required)  
            .mb-3
                label.form-label(for="import_prize") giá nhập
                input.form-control(type="number", name="import_price",step="0.01", required)
            .mb-3
                label.form-label(for="description") mô tả 
                input.form-control(type="text", name="description", required)
            //- .mb-3
            //-     label.form-label(for="category_id") ID danh muc
            //-     input.form-control(type="number", name="category_id", required)
            .mb-3
                label(for="category_id") Danh mục 
                select.form-select(name="category_id", id="category_id")
                    option(value="") -- Chọn danh mục --
                    each category in getcategory
                        option(value=`${category.category_id}`) #{category.category_name}
            .mb-3
                label.form-label(for="unit") đơn vị
                input.form-control(type="text", name="unit", required)  
            .mb-3
                label(for="status") trạng thái 
                select.form-select(name="status", id="status")
                    option(value="") -- Chọn trạng thái --
                    option(value="active") active
                    option(value="inactive") inactive
            div.modal-footer
                button.btn.btn-primary(type="submit") Thêm sản phẩm
                button.btn.btn-secondary(type="button", data-bs-dismiss="modal") Hủy bỏ

form#deleteForm(action="", method="POST")
  .modal.fade#deleteProductModal(tabindex="-1")
    .modal-dialog
      .modal-content
        .modal-header
          h5.modal-title Xác nhận xóa
        .modal-body
          p Bạn có chắc muốn xóa sản phẩm?
          input(type="hidden", name="product_id")
        .modal-footer
          button.btn.btn-secondary(type="button", data-bs-dismiss="modal") Hủy
          button.btn.btn-danger(type="submit") Xác nhận

div.modal.fade#editProductModal(tabindex="-1")
  div.modal-dialog
    div.modal-content
      div.modal-header
        h5.modal-title Sửa sản phẩm
        button.btn-close(type="button", data-bs-dismiss="modal", aria-label="Close")
      div.modal-body
        form#editForm(action="", method="POST")
            input(type="hidden", name="product_id", id="edit_product_id")
            .mb-3
                label(for="edit_product_name") Tên sản phẩm
                input.form-control(type="text", name="product_name", id="edit_product_name")
            .mb-3
                label(for="edit_sell") Giá bán
                input.form-control(type="number", name="sell_price", id="edit_sell", step="0.01")
            .mb-3
                label(for="edit_import") Giá nhập
                input.form-control(type="number", name="import_price", id="edit_import", step="0.01")
            .mb-3
                label(for="edit_des") Mô ta
                input.form-control(type="text", name="description", id="edit_des", step="0.01")
            //- .mb-3
            //-     label(for="edit_cat") ID danh muc
            //-     input.form-control(type="number", name="category_id", id="edit_cat", step="0.01")
            .mb-3
                label(for="edit_cat") Danh mục 
                select.form-select(name="category_id", id="edit_cat")
                    option(value="") -- Chọn danh mục --
                    each category in getcategory
                        option(value=`${category.category_id}`) #{category.category_name}
            .mb-3
                label(for="edit_unit") Đơn vị 
                input.form-control(type="text", name="unit", id="edit_unit", step="0.01")
            .mb-3
                label(for="edit_status") Trạng thái
                select.form-select(name="status", id="edit_status")
                    option(value="") -- Chọn trạng thái --
                    option(value="active") Active
                    option(value="inactive") Inactive
            div.modal-footer
                button.btn.btn-secondary(type="button", data-bs-dismiss="modal") Hủy
                button.btn.btn-primary(type="submit") Cập nhật


script(src="/script/product.js") 